<!DOCTYPE html>

<html lang="pt-BR">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<!-- Meta --><meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>11 tidyr e dplyr | R: Fundamentos e Ci√™ncia de Dados</title>
<link href="/assets/img/icon.webp" rel="icon" type="image/png"/>
<link href="/assets/img/icon.webp" rel="shortcut icon" type="image/png"/>
<meta content="Ricardo Semi√£o e Castro" name="Author"/>
<meta content="este cap√≠tulo est√° em constru√ß√£o. O que segue abaixo √© apenas um rascunho.  11.1 Introdu√ß√£o Neste cap√≠tulo, descreverei os fundamentos e opera√ß√µes da manipula√ß√£o de dados. Falo como aplic√°-las..." name="description"/>
<meta content="bookdown 0.45 with bs4_book()" name="generator"/>
<meta content="11 tidyr e dplyr | R: Fundamentos e Ci√™ncia de Dados" property="og:title"/>
<meta content="book" property="og:type"/>
<meta content="https://ricardo-semiao.github.io/course-rfcd/tidyr-dplyr.html" property="og:url"/>
<meta content="este cap√≠tulo est√° em constru√ß√£o. O que segue abaixo √© apenas um rascunho.  11.1 Introdu√ß√£o Neste cap√≠tulo, descreverei os fundamentos e opera√ß√µes da manipula√ß√£o de dados. Falo como aplic√°-las..." property="og:description"/>
<meta content="summary" name="twitter:card"/>
<meta content="11 tidyr e dplyr | R: Fundamentos e Ci√™ncia de Dados" name="twitter:title"/>
<meta content="@ricardo_semiao" name="twitter:site"/>
<meta content="este cap√≠tulo est√° em constru√ß√£o. O que segue abaixo √© apenas um rascunho.  11.1 Introdu√ß√£o Neste cap√≠tulo, descreverei os fundamentos e opera√ß√µes da manipula√ß√£o de dados. Falo como aplic√°-las..." name="twitter:description"/>
<!-- JS --><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet"/>
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.9.0/transition.js"></script><script src="libs/bs3compat-0.9.0/tabs.js"></script><script src="libs/bs3compat-0.9.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet"/>
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet"/>
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script><link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet"/>
<script src="libs/datatables-binding-0.34.0/datatables.js"></script><link href="libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet"/>
<link href="libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet"/>
<script src="libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script><link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet"/>
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script><link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet"/>
<script src="libs/selectize-0.12.0/selectize.min.js"></script><link href="libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet"/>
<script src="libs/crosstalk-1.2.1/js/crosstalk.min.js"></script><script crossorigin="anonymous" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js"></script><script crossorigin="anonymous" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js"></script><script crossorigin="anonymous" src="https://kit.fontawesome.com/6ecbd6c532.js"></script><script crossorigin="anonymous" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js"></script><script crossorigin="anonymous" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js"></script><!-- CSS --><style type="text/css">
        div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    </style>
<style type="text/css">
        /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
        div.csl-bib-body { }
        div.csl-entry {
            clear: both;
                    margin-bottom: 0em;
                }
        .hanging div.csl-entry {
            margin-left:2em;
            text-indent:-2em;
        }
        div.csl-left-margin {
            min-width:2em;
            float:left;
        }
        div.csl-right-inline {
            margin-left:2em;
            padding-left:1em;
        }
        div.csl-indent {
            margin-left: 2em;
        }
    </style>
<style>
        @font-face {
            font-display: swap;
            font-family: 'Montserrat';
            font-style: normal;
            font-weight: 400;
            src: url('/assets/fonts/montserrat-v31-latin-regular.woff2') format('woff2');
        }
        @font-face {
            font-display: swap;
            font-family: 'Montserrat';
            font-style: normal;
            font-weight: 700;
            src: url('/assets/fonts/montserrat-v31-latin-700.woff2') format('woff2');
        }
        @font-face {
            font-display: swap;
            font-family: 'Nunito Sans';
            font-style: normal;
            font-weight: 400;
            src: url('/assets/fonts/nunito-sans-v19-latin-regular.woff2') format('woff2');
        }
        @font-face {
            font-display: swap;
            font-family: 'Nunito Sans';
            font-style: italic;
            font-weight: 400;
            src: url('/assets/fonts/nunito-sans-v19-latin-italic.woff2') format('woff2');
        }
        @font-face {
            font-display: swap;
            font-family: 'Nunito Sans';
            font-style: normal;
            font-weight: 700;
            src: url('/assets/fonts/nunito-sans-v19-latin-700.woff2') format('woff2');
        }
    </style>
<link as="font" crossorigin="" href="/assets/fonts/montserrat-v31-latin-regular.woff2" rel="preload" type="font/woff2"/>
<link as="font" crossorigin="" href="/assets/fonts/montserrat-v31-latin-700.woff2" rel="preload" type="font/woff2"/>
<link as="font" crossorigin="" href="/assets/fonts/nunito-sans-v19-latin-regular.woff2" rel="preload" type="font/woff2"/>
<link as="font" crossorigin="" href="/assets/fonts/nunito-sans-v19-latin-700.woff2" rel="preload" type="font/woff2"/>
<link as="font" crossorigin="" href="/assets/fonts/nunito-sans-v19-latin-italic.woff2" rel="preload" type="font/woff2"/>
<link href="/assets/global.css" rel="stylesheet"/>
<link href="./assets/rsbd_module.css" rel="stylesheet"/>
<!-- Analytics --><script async="" data-goatcounter="https://ricardo-semiao.goatcounter.com/count" src="//gc.zgo.at/count.js"></script>
</head>
<body class="rssite-external" data-spy="scroll" data-target="#toc">
<!-- @@site-icons@@ -->
<header id="rssite-header">
<nav aria-label="Main site navigation">
<ul>
<li class="nav-li"><a href="/">Home</a></li>
<li class="nav-li"><a href="/blog">Blog</a></li>
<li class="nav-drop">
<button aria-controls="menu-projects" aria-expanded="false">
<svg><use href="/assets/img/icons.svg#icon-user"></use></svg>Personal
                    </button>
<ul id="menu-personal">
<li class="nav-li"><a href="/cv">CV</a></li>
<li class="nav-li"><a href="/gallery">Gallery</a></li>
</ul>
</li>
<li class="nav-drop">
<button aria-controls="menu-projects" aria-expanded="false">
<svg><use href="/assets/img/icons.svg#icon-project"></use></svg>Projects
                    </button>
<ul id="menu-projects">
<li class="nav-li"><a href="/library/rfcd">RFCD</a></li>
<li class="nav-li"><a href="/tools/phyopt">phyopt</a></li>
<li class="nav-li"><a href="/tools/mtsdesc">mtsdesc</a></li>
</ul>
</li>
</ul>
</nav>
</header><main class="rssite-rsbookdown" id="rssite-main"><div class="container-fluid" id="rsbookdown-main">
<div class="row">
<header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>
<div class="d-flex align-items-start justify-content-between">
<h1>
<a href="index.html" title="">R: Fundamentos e Ci√™ncia de Dados</a>
</h1>
<button aria-controls="main-nav" aria-expanded="true" class="btn btn-outline-primary d-lg-none ml-2 mt-1" data-target="#main-nav" data-toggle="collapse" type="button">
<i class="fas fa-bars"></i>
<span class="sr-only">Show table of contents</span>
</button>
</div>
<div class="collapse-lg" id="main-nav">
<form role="search">
<input aria-label="Search" class="form-control" id="search" placeholder="Buscar" type="search"/>
</form>
<nav aria-label="Table of contents"><h2>√çndice</h2>
<ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Bem Vindo(a)!</a></li>
<li><a class="" href="introduction.html"><span class="header-section-number">1</span> Introdu√ß√£o</a></li>
<li class="book-part">Parte I - Fundamentos: R Base</li>
<li><a class="" href="intro1.html">Introdu√ß√£o</a></li>
<li><a class="" href="syntax-vars.html"><span class="header-section-number">2</span> Sintaxe e Vari√°veis</a></li>
<li><a class="" href="data-attrs.html"><span class="header-section-number">3</span> Tipos de Valores e Atributos</a></li>
<li><a class="" href="subset.html"><span class="header-section-number">4</span> Subsetting</a></li>
<li><a class="" href="control-conds.html"><span class="header-section-number">5</span> Control Flow e Condi√ß√µes</a></li>
<li><a class="" href="funs-envs.html"><span class="header-section-number">6</span> Fun√ß√µes e Ambientes</a></li>
<li><a class="" href="paradigms.html"><span class="header-section-number">7</span> Paradigmas de Programa√ß√£o</a></li>
<li><a class="" href="others1.html"><span class="header-section-number">8</span> Outros T√≥picos</a></li>
<li><a class="" href="recap1.html">Recapitulando</a></li>
<li class="book-part">Parte II - Fundamentos: Tidyverse</li>
<li><a class="" href="intro2.html">Introdu√ß√£o</a></li>
<li><a class="" href="philosophy.html"><span class="header-section-number">9</span> Filosofia, readr, tibble</a></li>
<li><a class="" href="stringr-forcats.html"><span class="header-section-number">10</span> stringr e forcats</a></li>
<li><a class="active" href="tidyr-dplyr.html"><span class="header-section-number">11</span> tidyr e dplyr</a></li>
<li><a class="" href="ggplot.html"><span class="header-section-number">12</span> ggplot2</a></li>
<li><a class="" href="purrr.html"><span class="header-section-number">13</span> purrr</a></li>
<li><a class="" href="time-series.html"><span class="header-section-number">14</span> Datas e S√©ries de Tempo</a></li>
<li><a class="" href="others2.html"><span class="header-section-number">15</span> Outros</a></li>
<li><a class="" href="recap2.html">Recapitulando</a></li>
<li class="book-part">Parte III - Ci√™ncia de Dados: Processar</li>
<li><a class="" href="intro3.html">Introdu√ß√£o</a></li>
<li><a class="" href="ds.html"><span class="header-section-number">16</span> Ci√™ncia de Dados</a></li>
<li><a class="" href="import-tidy.html"><span class="header-section-number">17</span> Importar e Arrumar</a></li>
<li><a class="" href="manipulate.html"><span class="header-section-number">18</span> Manipular</a></li>
<li><a class="" href="unite.html"><span class="header-section-number">19</span> Unir</a></li>
<li><a class="" href="recap3.html">Recapitulando</a></li>
<li><a class="" href="visualize.html"><span class="header-section-number">20</span> Visualizar</a></li>
<li class="book-part">Parte IV - Ci√™ncia de Dados: Explorar</li>
<li><a class="" href="intro4.html">Introdu√ß√£o</a></li>
<li><a class="" href="stats-prob.html"><span class="header-section-number">21</span> Probabilidade e Estat√≠stica</a></li>
<li><a class="" href="regression.html"><span class="header-section-number">22</span> Regress√£o</a></li>
<li><a class="" href="ml.html"><span class="header-section-number">23</span> Aprendizado de M√°quina</a></li>
<li><a class="" href="others4.html"><span class="header-section-number">24</span> Outras Aplica√ß√µes</a></li>
<li><a class="" href="recap4.html">Recapitulando</a></li>
<li class="book-part">Ap√™ndice</li>
<li><a class="" href="dict.html">Dicion√°rio de fun√ß√µes</a></li>
<li><a class="" href="refs.html">Refer√™ncias</a></li>
</ul>
<!--<div class="book-extra">
              <p><a id="book-repo" href="#">Ver c√≥digo do livro <i class="fab fa-github"></i></a></li></p>
            </div>-->
</nav>
</div>
</header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div class="section level1" id="tidyr-dplyr" number="11">
<h1>
<span class="header-section-number">11</span> tidyr e dplyr<a aria-label="anchor" class="anchor" href="#tidyr-dplyr"><i class="fas fa-link"></i></a>
</h1>
<div class="warn">
<p>este cap√≠tulo est√° em constru√ß√£o. O que segue abaixo √© apenas um rascunho.</p>
</div>
<div class="section level2" id="introdu√ß√£o-10" number="11.1">
<h2>
<span class="header-section-number">11.1</span> Introdu√ß√£o<a aria-label="anchor" class="anchor" href="#introdu%C3%A7%C3%A3o-10"><i class="fas fa-link"></i></a>
</h2>
<p>Neste cap√≠tulo, descreverei os fundamentos e opera√ß√µes da manipula√ß√£o de dados. Falo como aplic√°-las usando os pacotes ‚Äúdplyr‚Äù e ‚Äútidyr‚Äù.</p>
</div>
<div class="section level2" id="importing-e-wrangling" number="11.2">
<h2>
<span class="header-section-number">11.2</span> Importing e Wrangling<a aria-label="anchor" class="anchor" href="#importing-e-wrangling"><i class="fas fa-link"></i></a>
</h2>
<div class="section level3" id="importing" number="11.2.1">
<h3>
<span class="header-section-number">11.2.1</span> Importing<a aria-label="anchor" class="anchor" href="#importing"><i class="fas fa-link"></i></a>
</h3>
<p>N√£o tem muito erro, tem que saber como s√£o os formatos de arquivo que existem. Veja o <a href="https://github.com/gvcode/trainee/blob/main/exercises/ex3-python-3.ipynb">ex 5 da lista 4</a> do trainee.</p>
<p>Cada arquivo, a depender do seu tipo, tem configura√ß√µes diferentes. Ex: um arquivo CSV pode ser separado por <code>,</code> ou <code>;</code>, qual a planilha quista de um <code>.xlsx</code>. Esse tipo de configura√ß√£o precisa ser passada para a fun√ß√£o que l√™ o arquivo.</p>
<p>Tamb√©m podemos estar interessados em:</p>
<ul>
<li>Pular linhas e colunas.</li>
<li>Definir tipos das colunas.</li>
<li>Especificar o que define strings (ex <code>'</code> ou <code>"</code>), coment√°rios (ex <code>#</code>), e valores <code>NA</code>.</li>
</ul>
</div>
<div class="section level3" id="tidy-data" number="11.2.2">
<h3>
<span class="header-section-number">11.2.2</span> Tidy Data<a aria-label="anchor" class="anchor" href="#tidy-data"><i class="fas fa-link"></i></a>
</h3>
<p>Antes de falar sobre <em>tidying</em>, vamos falar sobre o que √© um <em>dataset tidy</em>.</p>
<p>Veja a <a href="https://github.com/gvcode/trainee/blob/main/aula4-cd-manipulacao.ipynb">aula 4 do trainee</a>.</p>
<p>Para ci√™ncia de dados, ser√° √∫til utilizar uma organiza√ß√£o espec√≠fica, chamada de ‚Äútidy dataset‚Äù. Tr√™s regras a definem:</p>
<ul>
<li>Cada vari√°vel deve ter sua pr√≥pria coluna.</li>
<li>Cada observa√ß√£o deve ter sua pr√≥pria linha.</li>
<li>Cada valor deve ter sua pr√≥pria c√©lula.</li>
</ul>
</div>
<div class="section level3" id="tidy-data-1" number="11.2.3">
<h3>
<span class="header-section-number">11.2.3</span> Tidy Data<a aria-label="anchor" class="anchor" href="#tidy-data-1"><i class="fas fa-link"></i></a>
</h3>
<div class="inline-figure"><img height="200" src="https://d33wubrfki0l68.cloudfront.net/6f1ddb544fc5c69a2478e444ab8112fb0eea23f8/91adc/images/tidy-1.png"/></div>
<p>Quais os benef√≠cios?</p>
<ul>
<li>A consist√™ncia de utilizar uma mesma organiza√ß√£o, independente de qual, √© muito √∫til, especialmente porque facilita entender as ferramentas que trabalhar√£o com ela.</li>
<li>A arruma√ß√£o tidy √© intuitiva, e √© utilizada de maneira muito natural nas ferramentas, muitaz vezes vetorizadas, de visualiza√ß√£o e modelagem.</li>
</ul>
</div>
<div class="section level3" id="tidying" number="11.2.4">
<h3>
<span class="header-section-number">11.2.4</span> Tidying<a aria-label="anchor" class="anchor" href="#tidying"><i class="fas fa-link"></i></a>
</h3>
<ol style="list-style-type: decimal">
<li>Agora que j√° entendemos o que √© tidy data, podemos adquirir a habilidade de olhar para um dataset e, sabendo onde queremos chegar, elencar quais s√£o as altera√ß√µes a serem feitas.</li>
<li>Ap√≥s elencar quais altera√ß√µes devem ser feitas, √© simples fazer a ponte de quais <em>manipula√ß√µes de dados voc√™ quer fazer</em> ‚Äì ‚Äúsubset linhas‚Äù e ‚Äúseparar colunas‚Äù.</li>
<li>Por fim, s√≥ falta relembrar como √© o c√≥digo que aplica essa manipula√ß√£o. Essa √© a parte mais simples! √â s√≥ voltar na aula passada, pesquisar na internet, <em>ver no chat</em>, ou perguntar para o seu amigo preferido!</li>
</ol>
</div>
<div class="section level3" id="tidying-b√°sico" number="11.2.5">
<h3>
<span class="header-section-number">11.2.5</span> Tidying: B√°sico<a aria-label="anchor" class="anchor" href="#tidying-b%C3%A1sico"><i class="fas fa-link"></i></a>
</h3>
<div class="inline-figure"><img src="assets/img/dirty_dataset.png"/></div>
</div>
<div class="section level3" id="tidying-nas" number="11.2.6">
<h3>
<span class="header-section-number">11.2.6</span> Tidying: NAs<a aria-label="anchor" class="anchor" href="#tidying-nas"><i class="fas fa-link"></i></a>
</h3>
<div class="inline-figure"><img src="assets/img/na.png"/></div>
</div>
<div class="section level3" id="tidying-pivot" number="11.2.7">
<h3>
<span class="header-section-number">11.2.7</span> Tidying: Pivot<a aria-label="anchor" class="anchor" href="#tidying-pivot"><i class="fas fa-link"></i></a>
</h3>
<div class="inline-figure"><img src="assets/img/longer.png"/></div>
</div>
<div class="section level3" id="tidying-pivot-1" number="11.2.8">
<h3>
<span class="header-section-number">11.2.8</span> Tidying: Pivot<a aria-label="anchor" class="anchor" href="#tidying-pivot-1"><i class="fas fa-link"></i></a>
</h3>
<div class="inline-figure"><img src="assets/img/wider.png"/></div>
</div>
<div class="section level3" id="tidying-merge" number="11.2.9">
<h3>
<span class="header-section-number">11.2.9</span> Tidying: Merge<a aria-label="anchor" class="anchor" href="#tidying-merge"><i class="fas fa-link"></i></a>
</h3>
<div class="inline-figure"><img src="assets/img/merge.png"/></div>
</div>
<div class="section level3" id="tidying-receita" number="11.2.10">
<h3>
<span class="header-section-number">11.2.10</span> Tidying: Receita<a aria-label="anchor" class="anchor" href="#tidying-receita"><i class="fas fa-link"></i></a>
</h3>
<p>Qual foi a receitinha de bolo que aprendemos? (hmm bolo üòã). Recebemos um dataset, e:</p>
<ul>
<li>Arrumar os dados para o formato data frame.
<ul>
<li>Todas as colunas s√£o homog√™neas?
<ul>
<li>Remover linhas ‚Äúruins‚Äù, converter valores.</li>
</ul>
</li>
<li>Todas as colunas s√£o do mesmo tamanho?
<ul>
<li>Remover linhas ‚Äúruins‚Äù.</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section level3" id="tidying-receita-1" number="11.2.11">
<h3>
<span class="header-section-number">11.2.11</span> Tidying: Receita<a aria-label="anchor" class="anchor" href="#tidying-receita-1"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>Arrumar os dados para o formato tidy.
<ul>
<li>Toda coluna √© uma vari√°vel?
<ul>
<li>Remover colunas ‚Äúruins‚Äù.</li>
<li>Separar/unir colunas colunas.</li>
</ul>
</li>
<li>Toda linha √© uma observa√ß√£o?
<ul>
<li>Quais s√£o as vari√°veis que definem uma observa√ß√£o?</li>
<li>Pivot e melt.</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section level3" id="tidying-receita-2" number="11.2.12">
<h3>
<span class="header-section-number">11.2.12</span> Tidying: Receita<a aria-label="anchor" class="anchor" href="#tidying-receita-2"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>Dados NA.
<ul>
<li>Transformar dados ‚Äúruins‚Äù em NA.</li>
<li>Lidar com dados NA.</li>
</ul>
</li>
<li>Tenho mais de um dataset? Deix√°-los tidy e ent√£o realizaram algum merge.</li>
</ul>
</div>
<div class="section level3" id="transforming" number="11.2.13">
<h3>
<span class="header-section-number">11.2.13</span> Transforming<a aria-label="anchor" class="anchor" href="#transforming"><i class="fas fa-link"></i></a>
</h3>
<p>Ap√≥s arrumarmos um dataset, ainda aplicaremos transforma√ß√µes com base nas demandas da fase de visualiza√ß√£o e modelagem.</p>
<ul>
<li>Manipular linhas.
<ul>
<li>Sorting.</li>
<li>Sampling.</li>
<li>Filtrar observa√ß√µes.</li>
</ul>
</li>
</ul>
</div>
<div class="section level3" id="transforming-1" number="11.2.14">
<h3>
<span class="header-section-number">11.2.14</span> Transforming<a aria-label="anchor" class="anchor" href="#transforming-1"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>Transformar/criar colunas:
<ul>
<li>Alterar a unidade de uma vari√°vel.</li>
<li>Normalizar vari√°veis.</li>
<li>Agrupar as categorias de uma vari√°vel categ√≥rica.</li>
<li>Corrigir/formatar texto de vari√°veis string.</li>
<li>Manipular datas.</li>
<li>Criar novas colunas a partir de opera√ß√µes com m√∫ltiplas outras.</li>
<li>Criar uma coluna para ajudar em um plot.</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section level2" id="tidyr" number="11.3">
<h2>
<span class="header-section-number">11.3</span> tidyr<a aria-label="anchor" class="anchor" href="#tidyr"><i class="fas fa-link"></i></a>
</h2>
<p>O tidyr existe ‚Äúto help you create tidy data‚Äù.</p>
<p>Veja:</p>
<ul>
<li>O <a href="https://tidyr.tidyverse.org/articles/tidy-data.html">tutorial</a>.</li>
<li>A <a href="https://github.com/rstudio/cheatsheets/blob/main/tidyr.pdf">cheatsheet</a>.</li>
</ul>
<p>Aqui, temos as caixinhas:</p>
<ul>
<li>Reshape (pivot)</li>
<li>Separate/unite</li>
<li>NA handling (+ complete)</li>
<li>Outros: lists to dataframes (<a href="https://tidyr.tidyverse.org/articles/rectangle.html">unnest</a>)</li>
</ul>
<div class="section level3" id="separate" number="11.3.1">
<h3>
<span class="header-section-number">11.3.1</span> Separate<a aria-label="anchor" class="anchor" href="#separate"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb92"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"m-123"</span>, <span class="st">"f-455"</span>, <span class="st">"f-123"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/separate_wider_delim.html">separate_wider_delim</a></span><span class="op">(</span><span class="va">x</span>, delim <span class="op">=</span> <span class="st">"-"</span>, names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"gender"</span>, <span class="st">"unit"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/separate_wider_delim.html">separate_wider_position</a></span><span class="op">(</span><span class="va">x</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>gender <span class="op">=</span> <span class="fl">1</span>, <span class="fl">1</span>, unit <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/separate_wider_delim.html">separate_wider_regex</a></span><span class="op">(</span><span class="va">x</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>gender <span class="op">=</span> <span class="st">"."</span>, <span class="st">"."</span>, unit <span class="op">=</span> <span class="st">"\\d+"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 3 √ó 3</span></span>
<span><span class="co">#&gt;      id gender unit </span></span>
<span><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt;  &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1     1 m      123  </span></span>
<span><span class="co">#&gt; 2     2 f      455  </span></span>
<span><span class="co">#&gt; 3     3 f      123</span></span></code></pre></div>
</div>
<div class="section level3" id="na-handling-1" number="11.3.2">
<h3>
<span class="header-section-number">11.3.2</span> NA Handling 1<a aria-label="anchor" class="anchor" href="#na-handling-1"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb93"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="cn">NA</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="cn">NA</span>, <span class="st">"b"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html">drop_na</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 2 √ó 2</span></span>
<span><span class="co">#&gt;       x y</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1     1 a</span></span>
<span><span class="co">#&gt; 2     2 NA</span></span>
<span></span>
<span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/replace_na.html">replace_na</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">0</span>, y <span class="op">=</span> <span class="st">"unknown"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 3 √ó 2</span></span>
<span><span class="co">#&gt;       x y</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1     1 a</span></span>
<span><span class="co">#&gt; 2     2 unknown</span></span>
<span><span class="co">#&gt; 3     0 b</span></span>
<span></span>
<span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/fill.html">fill</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 3 √ó 2</span></span>
<span><span class="co">#&gt;       x y</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1     1 a</span></span>
<span><span class="co">#&gt; 2     2 a</span></span>
<span><span class="co">#&gt; 3     2 b</span></span></code></pre></div>
</div>
<div class="section level3" id="na-handling-2" number="11.3.3">
<h3>
<span class="header-section-number">11.3.3</span> NA Handling 2<a aria-label="anchor" class="anchor" href="#na-handling-2"><i class="fas fa-link"></i></a>
</h3>
<p>Complete: explicitar valores faltantes</p>
<div class="sourceCode" id="cb94"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/complete.html">complete</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 9 √ó 2</span></span>
<span><span class="co">#&gt;       x y</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1     1 a</span></span>
<span><span class="co">#&gt; 2     1 b</span></span>
<span><span class="co">#&gt; 3     1 NA</span></span>
<span><span class="co">#&gt; 4     2 a</span></span>
<span><span class="co">#&gt; 5     2 b</span></span>
<span><span class="co">#&gt; 6     2 NA</span></span>
<span><span class="co">#&gt; 7    NA a</span></span>
<span><span class="co">#&gt; 8    NA b</span></span>
<span><span class="co">#&gt; 9    NA NA</span></span></code></pre></div>
</div>
<div class="section level3" id="reshape" number="11.3.4">
<h3>
<span class="header-section-number">11.3.4</span> Reshape<a aria-label="anchor" class="anchor" href="#reshape"><i class="fas fa-link"></i></a>
</h3>
<p>Veja o artigo <a href="https://tidyr.tidyverse.org/articles/pivot.html">Pivoting</a>.</p>
<p>Exemplos no R.</p>
</div>
</div>
<div class="section level2" id="dplyr" number="11.4">
<h2>
<span class="header-section-number">11.4</span> dplyr<a aria-label="anchor" class="anchor" href="#dplyr"><i class="fas fa-link"></i></a>
</h2>
<p>O dplyr √© ‚Äúa grammar of data manipulation, providing a consistent set of verbs that help you solve the most common data manipulation challenges‚Äù.</p>
<p>Veja:</p>
<ul>
<li>O <a href="https://dplyr.tidyverse.org/articles/dplyr.html">tutorial</a>.</li>
<li>A <a href="https://github.com/rstudio/cheatsheets/blob/main/data-transformation.pdf">cheatsheet</a>.</li>
</ul>
<p>Aqui, temos as caixinhas:</p>
<ul>
<li>Subset</li>
<li>Operate</li>
<li>Reorder</li>
<li>Rename</li>
<li>Combine</li>
<li>Summarize</li>
<li>E tudo isso com groups</li>
</ul>
<div class="section level3" id="subset---linhas" number="11.4.1">
<h3>
<span class="header-section-number">11.4.1</span> Subset - Linhas<a aria-label="anchor" class="anchor" href="#subset---linhas"><i class="fas fa-link"></i></a>
</h3>
<p><code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code>:</p>
<div class="sourceCode" id="cb95"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">starwars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">mass</span> <span class="op">&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">mass</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Casos especiais:</p>
<div class="sourceCode" id="cb96"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">starwars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="va">starwars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb97"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">starwars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/duplicated.html">duplicated</a></span><span class="op">(</span><span class="va">mass</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">starwars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span><span class="op">(</span><span class="va">mass</span>, .keep_all <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3" id="subset---colunas" number="11.4.2">
<h3>
<span class="header-section-number">11.4.2</span> Subset - Colunas<a aria-label="anchor" class="anchor" href="#subset---colunas"><i class="fas fa-link"></i></a>
</h3>
<p><code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code>:</p>
<div class="sourceCode" id="cb98"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">starwars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">homeworld</span>, <span class="va">height</span>, <span class="va">mass</span><span class="op">)</span></span></code></pre></div>
<p>Permite usar v√°rios <em>selection helpers</em>:</p>
<div class="sourceCode" id="cb99"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">starwars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">name</span><span class="op">:</span><span class="va">mass</span><span class="op">)</span></span>
<span><span class="va">starwars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="op">!</span><span class="op">(</span><span class="va">name</span><span class="op">:</span><span class="va">mass</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">iris</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">starts_with</a></span><span class="op">(</span><span class="st">"Petal"</span><span class="op">)</span> <span class="op">&amp;</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html">ends_with</a></span><span class="op">(</span><span class="st">"Width"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3" id="operate" number="11.4.3">
<h3>
<span class="header-section-number">11.4.3</span> Operate<a aria-label="anchor" class="anchor" href="#operate"><i class="fas fa-link"></i></a>
</h3>
<p><code><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a></code>:</p>
<div class="sourceCode" id="cb100"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">starwars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span></span>
<span>    mass2 <span class="op">=</span> <span class="va">mass</span> <span class="op">*</span> <span class="fl">2</span>,</span>
<span>    mass2_squared <span class="op">=</span> <span class="va">mass2</span> <span class="op">^</span> <span class="fl">2</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><code>rows_*()</code>:</p>
<div class="sourceCode" id="cb101"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>a <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, b <span class="op">=</span> <span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>, c <span class="op">=</span> <span class="fl">0.5</span> <span class="op">+</span> <span class="fl">0</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rows.html">rows_insert</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>a <span class="op">=</span> <span class="fl">4</span>, b <span class="op">=</span> <span class="st">"z"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 4 √ó 3</span></span>
<span><span class="co">#&gt;       a b         c</span></span>
<span><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1     1 a       0.5</span></span>
<span><span class="co">#&gt; 2     2 b       1.5</span></span>
<span><span class="co">#&gt; 3     3 NA      2.5</span></span>
<span><span class="co">#&gt; 4     4 z      NA </span></span></code></pre></div>
</div>
<div class="section level3" id="reorder-1" number="11.4.4">
<h3>
<span class="header-section-number">11.4.4</span> Reorder<a aria-label="anchor" class="anchor" href="#reorder-1"><i class="fas fa-link"></i></a>
</h3>
<p><code><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange()</a></code>:</p>
<div class="sourceCode" id="cb102"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">by_cyl</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">wt</span><span class="op">)</span></span>
<span><span class="va">by_cyl</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">wt</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code> funciona! Mas tamb√©m temos <code><a href="https://dplyr.tidyverse.org/reference/relocate.html">relocate()</a></code>:</p>
<div class="sourceCode" id="cb103"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mtcars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html">relocate</a></span><span class="op">(</span><span class="va">vs</span><span class="op">:</span><span class="va">gear</span>, .before <span class="op">=</span> <span class="va">cyl</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3" id="rename" number="11.4.5">
<h3>
<span class="header-section-number">11.4.5</span> Rename<a aria-label="anchor" class="anchor" href="#rename"><i class="fas fa-link"></i></a>
</h3>
<p>A filosofia do tidyverse √© n√£o utilizar rownames (‚Äúmetadata is data‚Äù). Portanto, temos fun√ß√µes para renomear colunas, <code><a href="https://dplyr.tidyverse.org/reference/rename.html">rename()</a></code> e <code><a href="https://dplyr.tidyverse.org/reference/rename.html">rename_with()</a></code>:</p>
<div class="sourceCode" id="cb104"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span><span class="va">iris</span>, petal_length <span class="op">=</span> <span class="va">Petal.Length</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename_with</a></span><span class="op">(</span><span class="va">iris</span>, <span class="va">toupper</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3" id="summarize" number="11.4.6">
<h3>
<span class="header-section-number">11.4.6</span> Summarize<a aria-label="anchor" class="anchor" href="#summarize"><i class="fas fa-link"></i></a>
</h3>
<p><code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code>, resumir toda a informa√ß√£o em uma linha:</p>
<div class="sourceCode" id="cb105"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mtcars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">disp</span><span class="op">)</span>, n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;       mean  n</span></span>
<span><span class="co">#&gt; 1 230.7219 32</span></span></code></pre></div>
<p><code><a href="https://dplyr.tidyverse.org/reference/reframe.html">reframe()</a></code> mais raro, mais de uma linha de resumo:</p>
<div class="sourceCode" id="cb106"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mtcars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/reframe.html">reframe</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">disp</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.25</span>, <span class="fl">0.75</span><span class="op">)</span><span class="op">)</span>, n <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;      mean  n</span></span>
<span><span class="co">#&gt; 1 120.825 32</span></span>
<span><span class="co">#&gt; 2 326.000 32</span></span></code></pre></div>
</div>
<div class="section level3" id="combine-1" number="11.4.7">
<h3>
<span class="header-section-number">11.4.7</span> Combine<a aria-label="anchor" class="anchor" href="#combine-1"><i class="fas fa-link"></i></a>
</h3>
<p><code><a href="https://rdrr.io/r/base/cbind.html">cbind()</a></code> une as colunas de dois dataframes com as ‚Äúmesmas‚Äù linhas. <code>rbind</code> une as linhas de dois dataframes com as ‚Äúmesmas‚Äù colunas.</p>
<p><code><a href="https://dplyr.tidyverse.org/reference/bind_cols.html">bind_cols()</a></code> e <code><a href="https://dplyr.tidyverse.org/reference/bind_rows.html">bind_rows()</a></code> s√£o as vers√µes do dplyr, e unem qualquer quantidade de dataframes.</p>
<p>E se as linhas n√£o forem as mesmas? Precisamos de um merge/join: <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">inner_join()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">right_join()</a></code>, <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">full_join()</a></code>.</p>
</div>
<div class="section level3" id="across" number="11.4.8">
<h3>
<span class="header-section-number">11.4.8</span> Across<a aria-label="anchor" class="anchor" href="#across"><i class="fas fa-link"></i></a>
</h3>
<p>Como visto em <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code>, temos uma s√©rie de <em>tidyverse <a href="https://dplyr.tidyverse.org/reference/select.html">selection helpers</a></em> que podem ser utilizados para selecionar colunas.</p>
<p>Esses mesmos seletores podem ser utilizados em outros verbos, via <code><a href="https://dplyr.tidyverse.org/reference/across.html">across()</a></code>:</p>
<div class="sourceCode" id="cb107"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mtcars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">if_all</a></span><span class="op">(</span><span class="va">mpg</span><span class="op">:</span><span class="va">cyl</span>, <span class="op">~</span> <span class="va">.x</span> <span class="op">&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">.x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">mtcars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">across</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html">everything</a></span><span class="op">(</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">mtcars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html">across</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/where.html">where</a></span><span class="op">(</span><span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">.x</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">100</span><span class="op">)</span>, <span class="op">~</span> <span class="va">.x</span> <span class="op">-</span> <span class="fl">100</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3" id="groups" number="11.4.9">
<h3>
<span class="header-section-number">11.4.9</span> Groups<a aria-label="anchor" class="anchor" href="#groups"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb108"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mtcars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/split.html">split</a></span><span class="op">(</span><span class="va">.</span><span class="op">$</span><span class="va">cyl</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu">purrr</span><span class="fu">:::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map_dfr.html">map_dfr</a></span><span class="op">(</span><span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>cyl <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">.x</span><span class="op">$</span><span class="va">cyl</span><span class="op">)</span>, disp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">.x</span><span class="op">$</span><span class="va">disp</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb109"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mtcars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">disp</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Um grupo pra cada linha: <code><a href="https://dplyr.tidyverse.org/reference/rowwise.html">rowwise()</a></code>.</p>
</div>
<div class="section level3" id="eval_tidy" number="11.4.10">
<h3>
<span class="header-section-number">11.4.10</span> eval_tidy<a aria-label="anchor" class="anchor" href="#eval_tidy"><i class="fas fa-link"></i></a>
</h3>
<p>Lembre de <code>with</code> e <code><a href="https://rlang.r-lib.org/reference/eval_tidy.html">rlang::eval_tidy</a></code>:</p>
<div class="sourceCode" id="cb110"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mtcars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/with.html">with</a></span><span class="op">(</span><span class="va">cyl</span> <span class="op">+</span> <span class="va">disp</span><span class="op">)</span></span></code></pre></div>
<hr class="double-hrule"/>
</div>
</div>
<div class="section level2 unlisted unnumbered" id="complemento-9">
<h2>Complemento<a aria-label="anchor" class="anchor" href="#complemento-9"><i class="fas fa-link"></i></a>
</h2>
<div class="section level3 unnumbered" id="recapitulando-9">
<h3>Recapitulando<a aria-label="anchor" class="anchor" href="#recapitulando-9"><i class="fas fa-link"></i></a>
</h3>
<hr class="single-hrule"/>
</div>
<div class="section level3 unnumbered" id="dicion√°rio-de-fun√ß√µes-10">
<h3>Dicion√°rio de Fun√ß√µes<a aria-label="anchor" class="anchor" href="#dicion%C3%A1rio-de-fun%C3%A7%C3%B5es-10"><i class="fas fa-link"></i></a>
</h3>
<hr class="single-hrule"/>
</div>
<div class="section level3 unnumbered" id="refer√™ncias-9">
<h3>Refer√™ncias<a aria-label="anchor" class="anchor" href="#refer%C3%AAncias-9"><i class="fas fa-link"></i></a>
</h3>
<hr class="single-hrule"/>
</div>
<div class="section level3 unnumbered" id="exerc√≠cios-6">
<h3>Exerc√≠cios<a aria-label="anchor" class="anchor" href="#exerc%C3%ADcios-6"><i class="fas fa-link"></i></a>
</h3>
</div>
</div>
</div>
<div class="chapter-nav">
<div class="prev"><a href="stringr-forcats.html"><span class="header-section-number">10</span> stringr e forcats</a></div>
<div class="next"><a href="ggplot.html"><span class="header-section-number">12</span> ggplot2</a></div>
</div></main><!-- Sub Nav --><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
<nav aria-label="On this page" data-toggle="toc" id="toc"><h2>Nesta p√°gina</h2>
<ul class="nav navbar-nav">
<li><a class="nav-link" href="#tidyr-dplyr"><span class="header-section-number">11</span> tidyr e dplyr</a></li>
<li><a class="nav-link" href="#introdu%C3%A7%C3%A3o-10"><span class="header-section-number">11.1</span> Introdu√ß√£o</a></li>
<li>
<a class="nav-link" href="#importing-e-wrangling"><span class="header-section-number">11.2</span> Importing e Wrangling</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#importing"><span class="header-section-number">11.2.1</span> Importing</a></li>
<li><a class="nav-link" href="#tidy-data"><span class="header-section-number">11.2.2</span> Tidy Data</a></li>
<li><a class="nav-link" href="#tidy-data-1"><span class="header-section-number">11.2.3</span> Tidy Data</a></li>
<li><a class="nav-link" href="#tidying"><span class="header-section-number">11.2.4</span> Tidying</a></li>
<li><a class="nav-link" href="#tidying-b%C3%A1sico"><span class="header-section-number">11.2.5</span> Tidying: B√°sico</a></li>
<li><a class="nav-link" href="#tidying-nas"><span class="header-section-number">11.2.6</span> Tidying: NAs</a></li>
<li><a class="nav-link" href="#tidying-pivot"><span class="header-section-number">11.2.7</span> Tidying: Pivot</a></li>
<li><a class="nav-link" href="#tidying-pivot-1"><span class="header-section-number">11.2.8</span> Tidying: Pivot</a></li>
<li><a class="nav-link" href="#tidying-merge"><span class="header-section-number">11.2.9</span> Tidying: Merge</a></li>
<li><a class="nav-link" href="#tidying-receita"><span class="header-section-number">11.2.10</span> Tidying: Receita</a></li>
<li><a class="nav-link" href="#tidying-receita-1"><span class="header-section-number">11.2.11</span> Tidying: Receita</a></li>
<li><a class="nav-link" href="#tidying-receita-2"><span class="header-section-number">11.2.12</span> Tidying: Receita</a></li>
<li><a class="nav-link" href="#transforming"><span class="header-section-number">11.2.13</span> Transforming</a></li>
<li><a class="nav-link" href="#transforming-1"><span class="header-section-number">11.2.14</span> Transforming</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#tidyr"><span class="header-section-number">11.3</span> tidyr</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#separate"><span class="header-section-number">11.3.1</span> Separate</a></li>
<li><a class="nav-link" href="#na-handling-1"><span class="header-section-number">11.3.2</span> NA Handling 1</a></li>
<li><a class="nav-link" href="#na-handling-2"><span class="header-section-number">11.3.3</span> NA Handling 2</a></li>
<li><a class="nav-link" href="#reshape"><span class="header-section-number">11.3.4</span> Reshape</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#dplyr"><span class="header-section-number">11.4</span> dplyr</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#subset---linhas"><span class="header-section-number">11.4.1</span> Subset - Linhas</a></li>
<li><a class="nav-link" href="#subset---colunas"><span class="header-section-number">11.4.2</span> Subset - Colunas</a></li>
<li><a class="nav-link" href="#operate"><span class="header-section-number">11.4.3</span> Operate</a></li>
<li><a class="nav-link" href="#reorder-1"><span class="header-section-number">11.4.4</span> Reorder</a></li>
<li><a class="nav-link" href="#rename"><span class="header-section-number">11.4.5</span> Rename</a></li>
<li><a class="nav-link" href="#summarize"><span class="header-section-number">11.4.6</span> Summarize</a></li>
<li><a class="nav-link" href="#combine-1"><span class="header-section-number">11.4.7</span> Combine</a></li>
<li><a class="nav-link" href="#across"><span class="header-section-number">11.4.8</span> Across</a></li>
<li><a class="nav-link" href="#groups"><span class="header-section-number">11.4.9</span> Groups</a></li>
<li><a class="nav-link" href="#eval_tidy"><span class="header-section-number">11.4.10</span> eval_tidy</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#complemento-9">Complemento</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#recapitulando-9">Recapitulando</a></li>
<li><a class="nav-link" href="#dicion%C3%A1rio-de-fun%C3%A7%C3%B5es-10">Dicion√°rio de Fun√ß√µes</a></li>
<li><a class="nav-link" href="#refer%C3%AAncias-9">Refer√™ncias</a></li>
<li><a class="nav-link" href="#exerc%C3%ADcios-6">Exerc√≠cios</a></li>
</ul>
</li>
</ul>
<!--<div class="book-extra">
            <ul class="list-unstyled">
              <li><a id="book-source" href="#">Ver c√≥digo <i class="fab fa-github"></i></a></li>
              <li><a id="book-edit" href="#" style="display: none">Edite o c√≥digo <i class="fab fa-github"></i></a></li>
            </ul>
          </div>-->
</nav>
</div>
</div>
</div></main> <!-- .container -->
<footer id="rssite-footer"><p>
            Livro feito com <a href="https://bookdown.org">bookdown</a><span class="footer-div"></span>
            tema <a href="https://github.com/ricardo-semiao/ricardo-semiao/tree/main/themes/rsbookdown">rsbookdown</a>.
        </p>
</footer><button aria-hidden="true" id="back-to-top" onclick="window.scrollTo(0, 0); return false;">
<span>‚Üë</span> Back to top
    </button><script src="/assets/global.js"></script>
<!-- Scripts -->
<script src="./assets/rsbd_module.js"></script><!-- dynamically load mathjax for compatibility with self-contained --><script>
        (function () {
        var script = document.createElement("script");
        script.type = "text/javascript";
        var src = "true";
        if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
        if (location.protocol !== "file:")
            if (/^https?:/.test(src))
            src = src.replace(/^https?:/, '');
        script.src = src;
        document.getElementsByTagName("head")[0].appendChild(script);
        })();
    </script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
    for (let popover of popovers) {
        const div = document.createElement('div');
        div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
        div.innerHTML = popover.getAttribute('data-content');
    
        var has_math = div.querySelector("span.math");
        if (has_math) {
        document.body.appendChild(div);
        MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
        MathJax.Hub.Queue(function() {
            popover.setAttribute('data-content', div.innerHTML);
            document.body.removeChild(div);
        })
        }
    }
    </script>
</body>
</html>
